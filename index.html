<!doctype html>
<html>
<head>
    <style>
        html, body {
            margin: 0;
        }
    </style>
</head>
<body>
<img src="owl-2320703_1920.jpg" id="img" style="display: none;"/>
<canvas style="border:1px solid #000000;margin:0;padding:0;position:relative;" id="canvas"
        width="100vw" height="100vh"></canvas>


<script>
    let canvas = document.getElementById("canvas"),
        ctx = canvas.getContext("2d"),
        elements = [],
        elementsCount = 8,
        iteration = 0,
        offsetX = 0,
        offsetY = 0,
        lastRender,
        img = document.getElementById('img');

    function getRandomInt(min, max) {
        min = Math.ceil(min);
        max = Math.floor(max);
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function initElements() {
        let x, i;
        for (i = 0; i < elementsCount; i++) {
            if (i % 2 === 0) {
                x = getRandomInt(0, 200);
            } else {
                x = getRandomInt(canvas.width / 2, canvas.width / 2 + 200);
            }
            elements.push([
                x,
                getRandomInt(0, canvas.height),
                canvas.width / 2 - 80,
                200,
                getRandomInt(0, 100)
            ]);
        }
    }

    function init() {
        ctx.canvas.width = window.innerWidth;
        ctx.canvas.height = window.innerHeight;
        ctx.save();
        initElements();
        window.addEventListener('mousemove', mouseMove, false);
        lastRender = new Date();
        window.requestAnimationFrame(draw);
    }

    function draw() {


        ctx.clearRect(0, 0, canvas.width, canvas.height);

        for (let i = 0; i < elements.length; i++) {
            ctx.drawImage(
                img,
                img.width / 2 - (offsetX / 100 * elements[i][4]),
                img.height / 2 - (offsetY / 100 * elements[i][4]),
                elements[i][2],
                elements[i][3],
                elements[i][0] + (offsetX / 2 / 100 * elements[i][4]),
                elements[i][1] + iteration + (offsetY / 2 / 100 * elements[i][4]),
                elements[i][2],
                elements[i][3]
            );

            if (elements[i][1] + iteration + (offsetY / 2 / 100 * elements[i][4]) > canvas.height) {
                elements[i][1] = -elements[i][3] - iteration - (offsetY / 2 / 100 * elements[i][4]);
            }
        }


        iteration++;
        window.requestAnimationFrame(draw);

    }


    function mouseMove(e) {
        let posx, posy, pos = getMousePos(canvas, e);
        posx = pos.x;
        posy = pos.y;

        offsetX = posx / 5;
        offsetY = posy / 5;
    }

    // window.addEventListener('mousemove', mouseMove, false);

    function getMousePos(canvas, evt) {
        var rect = canvas.getBoundingClientRect();
        return {
            x: (evt.clientX - rect.left) / (rect.right - rect.left) * canvas.width,
            y: (evt.clientY - rect.top) / (rect.bottom - rect.top) * canvas.height
        };
    }

    init();
</script>
</body>
</html>